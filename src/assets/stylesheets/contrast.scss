@function bestContrast($bg, $darkText, $liteText) {
  @return exclusiveByBinaryAlpha(
    color-mix(in srgb, $darkText 0%, preferBlackTextAsBinaryAlpha($bg, 1)),
    color-mix(in srgb, $liteText 0%, preferBlackTextAsBinaryAlpha($bg, 0))
  );
}

@function exclusiveByBinaryAlpha($color1, $color2) {
  @return color(from color-mix(in srgb, $color1, $color2) srgb r g b / 1);
}

@function preferBlackTextAsBinaryAlpha($bg, $alpha) {
  // Backgrounds #a3a3a3 (Y = 0.366253) and #a3a3a4 (Y = 0.366613) were
  // manually found with contrast tools (e.g., https://colorcontrast.app/)
  // as the flip point between black and white text. Their midpoint represents
  // the approximate contrast pivot in Y.
  $pivotY: (0.366253 + 0.366613) * 0.5;
  $pivotYOffset: 0.5 - $pivotY;

  @return color(
    from $bg xyz none none none /
      calc(#{if($alpha == 0, '1 -', '')} round(#{y '+' $pivotYOffset}))
  );
}
