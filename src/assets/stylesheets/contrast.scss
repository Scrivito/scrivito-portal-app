@function bestContrast($color, $dark, $lite) {
  @return exclusiveByBinaryAlpha(
    color-mix(in srgb, $lite 0%, isLightAsBinaryAlpha($color, 0)),
    color-mix(in srgb, $dark 0%, isLightAsBinaryAlpha($color, 1))
  );
}

@function exclusiveByBinaryAlpha($color1, $color2) {
  @return color(from color-mix(in srgb, $color1, $color2) srgb r g b / 1);
}

@function isLightAsBinaryAlpha($color, $alpha) {
  // See https://www.w3.org/WAI/GL/wiki/Contrast_ratio
  // (1 + 0.05) / (y + 0.05) = (y + 0.05) / (0 + 0.05)
  $wcagMiddleRelativeLuminance: 0.179129;
  $yOffset: 0.5 - $wcagMiddleRelativeLuminance;

  @return color(
    from $color xyz none none none /
      calc(#{if($alpha == 0, '1 -', '')} round(#{y '+' $yOffset}))
  );
}
